https://linuxhowtoguide.blogspot.com/2016/11/step-by-step-installation-of-nagios4x.html



https://www.cloudbooklet.com/how-to-install-php-7-3-on-ubuntu-18-04/  {php7.3 install}








sudo apt-get install automake perl wget nginx php7.3 gcc libc6 libc6-dev libgd-dev make libsnmp-dev libpng-dev libjpeg-dev rrdtool libtime-hires-perl librrds-perl php-gd g++

sudo apt-get update
sudo apt-get install automake perl wget apache2 php7.3 gcc libc6 libc6-dev libgd-dev make libsnmp-dev libpng-dev libjpeg-dev rrdtool libtime-hires-perl librrds-perl php7.3-gd g++



	



useradd nagios
groupadd nagcmd
usermod -a -G nagcmd nagios
sudo usermod -a -G nagcmd www-data


tar -zxvf $NAGIOSPACKAGE
cd nagios-4.3.1
./configure -with-command-group=nagcmd
make all
make install
make install-init
make install-commandmode
make install-config
make install-webconf
sudo a2enmod rewrite cgi

cp -R contrib/eventhandlers/ /usr/local/nagios/libexec/
chown -R nagios:nagios /usr/local/nagios/libexec/eventhandlers
/usr/local/nagios/bin/nagios -v /usr/local/nagios/etc/nagios.cfg
echo /usr/local/nagios/bin/nagios -v /usr/local/nagios/etc/nagios.cfg > /sbin/nagioschk
chmod 755 /sbin/nagioschk
htpasswd -s -b -c /usr/local/nagios/etc/htpasswd.users nagiosadmin nagiosadmin
service httpd restart && service nagios restart








---------- Nagios Plugin--------

tar -xzvf <file name>

cd nagios-plugins-2.4.8
./configure --with-nagios-user=nagios --with-nagios-group=nagios --with-openssl


make

make install

sudo apt-get install nagios-nrpe-server
sudo systemctl status nagios-nrpe-server



----------PNP4NAGIOS Installation-----------------

tar -xzvf <file name>

cd pnp4nagios-0.6.26
./configure

make all
make fullinstall

sudo systemctl enable npcd
sudo systemctl start npcd
sudo systemctl start npcd



sudo systemctl status nagios-nrpe-server
service nagios status
service apache2 status
service npcd status


------mk-livesstatus----------------


tar 	 $MKLIVE
cd mk-livestatus-1.2.6
./configure --with-nagios4.5
make && make install
cat <<EOT >> /usr/local/nagios/etc/nagios.cfg
broker_module=/usr/local/lib/mk-livestatus/livestatus.o /usr/local/nagios/var/rw/live
EOT
service nagios restart
#echo 'GET hosts' | unixcat /usr/lib/nagios/mk-livestatus/live

service npcd restart && service httpd restart && service nagios restart && service nrpe restart	
service npcd restart && service apache2 restart && service nagios restart && service nagios-nrpe-server restart

service npcd status && service httpd status && service nagios status && service nrpe status
service npcd status && service apache2 status && service nagios status && service nagios-nrpe-server status